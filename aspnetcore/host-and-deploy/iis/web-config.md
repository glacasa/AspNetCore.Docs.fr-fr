---
title: fichier web.config
author: rick-anderson
description: Découvrez ce qui se trouve dans le fichier web.config et comment configurer différentes options de module ASP.NET Core.
monikerRange: '>= aspnetcore-5.0'
ms.author: riande
ms.custom: mvc
ms.date: 02/07/2020
no-loc:
- ASP.NET Core Identity
- cookie
- Cookie
- Blazor
- Blazor Server
- Blazor WebAssembly
- Identity
- Let's Encrypt
- Razor
- SignalR
uid: host-and-deploy/iis/web-config
ms.openlocfilehash: 4d7305f7184745b66c5de6c86b907d419183cb3f
ms.sourcegitcommit: d60bfd52bfb559e805abd654b87a2a0c7eb69cf8
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 10/06/2020
ms.locfileid: "91755276"
---
# <a name="webconfig-file"></a><span data-ttu-id="cef9b-103">Fichier `web.config`</span><span class="sxs-lookup"><span data-stu-id="cef9b-103">`web.config` file</span></span>

<span data-ttu-id="cef9b-104">Le `web.config` est un fichier qui est lu par IIS et le [module ASP.net Core](xref:host-and-deploy/aspnet-core-module) pour configurer une application hébergée avec IIS.</span><span class="sxs-lookup"><span data-stu-id="cef9b-104">The `web.config` is a file that is read by IIS and the [ASP.NET Core Module](xref:host-and-deploy/aspnet-core-module) to configure an app hosted with IIS.</span></span>

## <a name="webconfig-file-location"></a><span data-ttu-id="cef9b-105">`web.config` emplacement du fichier</span><span class="sxs-lookup"><span data-stu-id="cef9b-105">`web.config` file location</span></span>

<span data-ttu-id="cef9b-106">Pour configurer correctement le [Module ASP.net Core](xref:host-and-deploy/aspnet-core-module) , le `web.config` fichier doit être présent au chemin d’accès [racine du contenu](xref:fundamentals/index#content-root) (en général, le chemin d’accès de base de l’application) de l’application déployée.</span><span class="sxs-lookup"><span data-stu-id="cef9b-106">In order to set up the [ASP.NET Core Module](xref:host-and-deploy/aspnet-core-module) correctly, the `web.config` file must be present at the [content root](xref:fundamentals/index#content-root) path (typically the app base path) of the deployed app.</span></span> <span data-ttu-id="cef9b-107">Il s’agit du même emplacement que le chemin physique du site Web fourni à IIS.</span><span class="sxs-lookup"><span data-stu-id="cef9b-107">This is the same location as the website physical path provided to IIS.</span></span> <span data-ttu-id="cef9b-108">Le `web.config` fichier est requis à la racine de l’application pour permettre la publication de plusieurs applications à l’aide de Web Deploy.</span><span class="sxs-lookup"><span data-stu-id="cef9b-108">The `web.config` file is required at the root of the app to enable the publishing of multiple apps using Web Deploy.</span></span>

<span data-ttu-id="cef9b-109">Des fichiers sensibles existent sur le chemin d’accès physique de l’application, par exemple `{ASSEMBLY}.runtimeconfig.json` , `{ASSEMBLY}.xml` (commentaires de documentation XML) et `{ASSEMBLY}.deps.json` , où l’espace réservé `{ASSEMBLY}` est le nom de l’assembly.</span><span class="sxs-lookup"><span data-stu-id="cef9b-109">Sensitive files exist on the app's physical path, such as `{ASSEMBLY}.runtimeconfig.json`, `{ASSEMBLY}.xml` (XML Documentation comments), and `{ASSEMBLY}.deps.json`, where the placeholder `{ASSEMBLY}` is the assembly name.</span></span> <span data-ttu-id="cef9b-110">Lorsque le `web.config` fichier est présent et que le site démarre normalement, IIS ne traite pas ces fichiers sensibles s’ils sont demandés.</span><span class="sxs-lookup"><span data-stu-id="cef9b-110">When the `web.config` file is present and the site starts normally, IIS doesn't serve these sensitive files if they're requested.</span></span> <span data-ttu-id="cef9b-111">Si le `web.config` fichier est manquant, nommé de façon incorrecte ou ne peut pas configurer le site pour un démarrage normal, IIS peut traiter les fichiers sensibles publiquement.</span><span class="sxs-lookup"><span data-stu-id="cef9b-111">If the `web.config` file is missing, incorrectly named, or unable to configure the site for normal startup, IIS may serve sensitive files publicly.</span></span>

<span data-ttu-id="cef9b-112">**Le `web.config` fichier doit être présent dans le déploiement à tout moment, correctement nommé et capable de configurer le site pour un démarrage normal. Ne supprimez jamais le `web.config` fichier d’un déploiement de production.**</span><span class="sxs-lookup"><span data-stu-id="cef9b-112">**The `web.config` file must be present in the deployment at all times, correctly named, and able to configure the site for normal start up. Never remove the `web.config` file from a production deployment.**</span></span>

<span data-ttu-id="cef9b-113">Si un `web.config` fichier n’est pas présent dans le projet, le fichier est créé avec les et corrects `processPath` `arguments` pour configurer le module ASP.net Core, puis déplacé vers la [sortie publiée](xref:host-and-deploy/directory-structure).</span><span class="sxs-lookup"><span data-stu-id="cef9b-113">If a `web.config` file isn't present in the project, the file is created with the correct `processPath` and `arguments` to configure the ASP.NET Core Module and moved to [published output](xref:host-and-deploy/directory-structure).</span></span>

<span data-ttu-id="cef9b-114">Si un `web.config` fichier est présent dans le projet, le fichier est transformé avec les et corrects `processPath` `arguments` pour configurer le module ASP.net Core, puis déplacé vers la sortie publiée.</span><span class="sxs-lookup"><span data-stu-id="cef9b-114">If a `web.config` file is present in the project, the file is transformed with the correct `processPath` and `arguments` to configure the ASP.NET Core Module and moved to published output.</span></span> <span data-ttu-id="cef9b-115">La transformation ne modifie pas les paramètres de configuration IIS dans le fichier.</span><span class="sxs-lookup"><span data-stu-id="cef9b-115">The transformation doesn't modify IIS configuration settings in the file.</span></span>

<span data-ttu-id="cef9b-116">Le `web.config` fichier peut fournir des paramètres de configuration IIS supplémentaires qui contrôlent les modules IIS actifs.</span><span class="sxs-lookup"><span data-stu-id="cef9b-116">The `web.config` file may provide additional IIS configuration settings that control active IIS modules.</span></span> <span data-ttu-id="cef9b-117">Pour plus d’informations sur les modules IIS capables de traiter les requêtes avec des applications ASP.NET Core, consultez la rubrique [Modules IIS](xref:host-and-deploy/iis/modules).</span><span class="sxs-lookup"><span data-stu-id="cef9b-117">For information on IIS modules that are capable of processing requests with ASP.NET Core apps, see the [IIS modules](xref:host-and-deploy/iis/modules) topic.</span></span>

<span data-ttu-id="cef9b-118">La création, la transformation et la publication du `web.config` fichier sont gérées par une cible MSBuild ( `_TransformWebConfig` ) lors de la publication du projet.</span><span class="sxs-lookup"><span data-stu-id="cef9b-118">Creating, transforming, and publishing the `web.config` file is handled by an MSBuild target (`_TransformWebConfig`) when the project is published.</span></span> <span data-ttu-id="cef9b-119">Cette cible est présente dans les cibles du SDK web (`Microsoft.NET.Sdk.Web`).</span><span class="sxs-lookup"><span data-stu-id="cef9b-119">This target is present in the Web SDK targets (`Microsoft.NET.Sdk.Web`).</span></span> <span data-ttu-id="cef9b-120">Le SDK est défini en haut du fichier projet :</span><span class="sxs-lookup"><span data-stu-id="cef9b-120">The SDK is set at the top of the project file:</span></span>

```xml
<Project Sdk="Microsoft.NET.Sdk.Web">
```

<span data-ttu-id="cef9b-121">Pour empêcher le kit de développement logiciel (SDK) Web de transformer le `web.config` fichier, utilisez la `<IsTransformWebConfigDisabled>` propriété dans le fichier projet :</span><span class="sxs-lookup"><span data-stu-id="cef9b-121">To prevent the Web SDK from transforming the `web.config` file, use the `<IsTransformWebConfigDisabled>` property in the project file:</span></span>

```xml
<PropertyGroup>
  <IsTransformWebConfigDisabled>true</IsTransformWebConfigDisabled>
</PropertyGroup>
```

<span data-ttu-id="cef9b-122">Lorsque vous désactivez le kit de développement logiciel (SDK) Web pour transformer le fichier, `processPath` et `arguments` doit être défini manuellement par le développeur.</span><span class="sxs-lookup"><span data-stu-id="cef9b-122">When disabling the Web SDK from transforming the file, the `processPath` and `arguments` should be manually set by the developer.</span></span> <span data-ttu-id="cef9b-123">Pour plus d’informations, consultez <xref:host-and-deploy/aspnet-core-module>.</span><span class="sxs-lookup"><span data-stu-id="cef9b-123">For more information, see <xref:host-and-deploy/aspnet-core-module>.</span></span>

## <a name="configuration-of-aspnet-core-module-with-webconfig"></a><span data-ttu-id="cef9b-124">Configuration de ASP.NET Core Module avec `web.config`</span><span class="sxs-lookup"><span data-stu-id="cef9b-124">Configuration of ASP.NET Core Module with `web.config`</span></span>

<span data-ttu-id="cef9b-125">Le module ASP.NET Core est configuré avec la `aspNetCore` section du `system.webServer` nœud dans le fichier du site `web.config` .</span><span class="sxs-lookup"><span data-stu-id="cef9b-125">The ASP.NET Core Module is configured with the `aspNetCore` section of the `system.webServer` node in the site's `web.config` file.</span></span>

<span data-ttu-id="cef9b-126">Le `web.config` fichier suivant est publié pour un [déploiement dépendant du Framework](/dotnet/articles/core/deploying/#framework-dependent-deployments-fdd) et configure le module ASP.net Core pour gérer les demandes de site :</span><span class="sxs-lookup"><span data-stu-id="cef9b-126">The following `web.config` file is published for a [framework-dependent deployment](/dotnet/articles/core/deploying/#framework-dependent-deployments-fdd) and configures the ASP.NET Core Module to handle site requests:</span></span>

```xml
<?xml version="1.0" encoding="utf-8"?>
<configuration>
  <location path="." inheritInChildApplications="false">
    <system.webServer>
      <handlers>
        <add name="aspNetCore" path="*" verb="*" modules="AspNetCoreModuleV2" resourceType="Unspecified" />
      </handlers>
      <aspNetCore processPath="dotnet"
                  arguments=".\MyApp.dll"
                  stdoutLogEnabled="false"
                  stdoutLogFile=".\logs\stdout"
                  hostingModel="inprocess" />
    </system.webServer>
  </location>
</configuration>
```

<span data-ttu-id="cef9b-127">Les éléments suivants `web.config` sont publiés pour un [Déploiement autonome](/dotnet/articles/core/deploying/#self-contained-deployments-scd):</span><span class="sxs-lookup"><span data-stu-id="cef9b-127">The following `web.config` is published for a [self-contained deployment](/dotnet/articles/core/deploying/#self-contained-deployments-scd):</span></span>

```xml
<?xml version="1.0" encoding="utf-8"?>
<configuration>
  <location path="." inheritInChildApplications="false">
    <system.webServer>
      <handlers>
        <add name="aspNetCore" path="*" verb="*" modules="AspNetCoreModuleV2" resourceType="Unspecified" />
      </handlers>
      <aspNetCore processPath=".\MyApp.exe"
                  stdoutLogEnabled="false"
                  stdoutLogFile=".\logs\stdout"
                  hostingModel="inprocess" />
    </system.webServer>
  </location>
</configuration>
```

<span data-ttu-id="cef9b-128">La <xref:System.Configuration.SectionInformation.InheritInChildApplications%2A> propriété a la valeur `false` pour indiquer que les paramètres spécifiés dans l' [`<location>`](/iis/manage/managing-your-configuration-settings/understanding-iis-configuration-delegation#the-concept-of-location) élément ne sont pas hérités par les applications qui résident dans un sous-répertoire de l’application.</span><span class="sxs-lookup"><span data-stu-id="cef9b-128">The <xref:System.Configuration.SectionInformation.InheritInChildApplications%2A> property is set to `false` to indicate that the settings specified within the [`<location>`](/iis/manage/managing-your-configuration-settings/understanding-iis-configuration-delegation#the-concept-of-location) element aren't inherited by apps that reside in a subdirectory of the app.</span></span>

<span data-ttu-id="cef9b-129">Lorsqu’une application est déployée sur [Azure App Service](https://azure.microsoft.com/services/app-service/), le chemin d’accès `stdoutLogFile` est défini sur `\\?\%home%\LogFiles\stdout`.</span><span class="sxs-lookup"><span data-stu-id="cef9b-129">When an app is deployed to [Azure App Service](https://azure.microsoft.com/services/app-service/), the `stdoutLogFile` path is set to `\\?\%home%\LogFiles\stdout`.</span></span> <span data-ttu-id="cef9b-130">Le chemin d’accès enregistre les journaux stdout dans le `LogFiles` dossier, qui est un emplacement créé automatiquement par le service.</span><span class="sxs-lookup"><span data-stu-id="cef9b-130">The path saves stdout logs to the `LogFiles` folder, which is a location automatically created by the service.</span></span>

<span data-ttu-id="cef9b-131">Pour plus d’informations sur la configuration d’une sous-application IIS, consultez <xref:host-and-deploy/iis/index#sub-applications>.</span><span class="sxs-lookup"><span data-stu-id="cef9b-131">For information on IIS sub-application configuration, see <xref:host-and-deploy/iis/index#sub-applications>.</span></span>

### <a name="attributes-of-the-aspnetcore-element"></a><span data-ttu-id="cef9b-132">Attributs de l' `aspNetCore` élément</span><span class="sxs-lookup"><span data-stu-id="cef9b-132">Attributes of the `aspNetCore` element</span></span>

| <span data-ttu-id="cef9b-133">Attribut</span><span class="sxs-lookup"><span data-stu-id="cef9b-133">Attribute</span></span> | <span data-ttu-id="cef9b-134">Description</span><span class="sxs-lookup"><span data-stu-id="cef9b-134">Description</span></span> | <span data-ttu-id="cef9b-135">Default</span><span class="sxs-lookup"><span data-stu-id="cef9b-135">Default</span></span> |
| --------- | ----------- | :-----: |
| `arguments` | <p><span data-ttu-id="cef9b-136">Attribut de chaîne facultatif.</span><span class="sxs-lookup"><span data-stu-id="cef9b-136">Optional string attribute.</span></span></p><p><span data-ttu-id="cef9b-137">Arguments de l’exécutable spécifié dans `processPath` .</span><span class="sxs-lookup"><span data-stu-id="cef9b-137">Arguments to the executable specified in `processPath`.</span></span></p> | |
| `disableStartUpErrorPage` | <p><span data-ttu-id="cef9b-138">Attribut booléen facultatif.</span><span class="sxs-lookup"><span data-stu-id="cef9b-138">Optional Boolean attribute.</span></span></p><p><span data-ttu-id="cef9b-139">Si la valeur est true, la page d' **échec du processus 502,5** est supprimée et la page de codes d’État 502 configurée dans le est `web.config` prioritaire.</span><span class="sxs-lookup"><span data-stu-id="cef9b-139">If true, the **502.5 - Process Failure** page is suppressed, and the 502 status code page configured in the `web.config` takes precedence.</span></span></p> | `false` |
| `forwardWindowsAuthToken` | <p><span data-ttu-id="cef9b-140">Attribut booléen facultatif.</span><span class="sxs-lookup"><span data-stu-id="cef9b-140">Optional Boolean attribute.</span></span></p><p><span data-ttu-id="cef9b-141">Si la valeur est true, le jeton est transmis au processus enfant qui écoute `%ASPNETCORE_PORT%` en tant qu’en-tête « MS-ASPNETCORE-WINAUTHTOKEN » par demande.</span><span class="sxs-lookup"><span data-stu-id="cef9b-141">If true, the token is forwarded to the child process listening on `%ASPNETCORE_PORT%` as a header 'MS-ASPNETCORE-WINAUTHTOKEN' per request.</span></span> <span data-ttu-id="cef9b-142">Il incombe à ce processus d’appeler CloseHandle sur ce jeton par demande.</span><span class="sxs-lookup"><span data-stu-id="cef9b-142">It's the responsibility of that process to call CloseHandle on this token per request.</span></span></p> | `true` |
| `hostingModel` | <p><span data-ttu-id="cef9b-143">Attribut de chaîne facultatif.</span><span class="sxs-lookup"><span data-stu-id="cef9b-143">Optional string attribute.</span></span></p><p><span data-ttu-id="cef9b-144">Spécifie le modèle d’hébergement comme in-process ( `InProcess` / `inprocess` ) ou out-of-process ( `OutOfProcess` / `outofprocess` ).</span><span class="sxs-lookup"><span data-stu-id="cef9b-144">Specifies the hosting model as in-process (`InProcess`/`inprocess`) or out-of-process (`OutOfProcess`/`outofprocess`).</span></span></p> | `InProcess`<br>`inprocess` |
| `processesPerApplication` | <p><span data-ttu-id="cef9b-145">Attribut entier facultatif.</span><span class="sxs-lookup"><span data-stu-id="cef9b-145">Optional integer attribute.</span></span></p><p><span data-ttu-id="cef9b-146">Spécifie le nombre d’instances du processus spécifié dans le `processPath` paramètre qui peut être lancé par application.</span><span class="sxs-lookup"><span data-stu-id="cef9b-146">Specifies the number of instances of the process specified in the `processPath` setting that can be spun up per app.</span></span></p><p><span data-ttu-id="cef9b-147">&dagger;Pour l’hébergement in-process, la valeur est limitée à `1`.</span><span class="sxs-lookup"><span data-stu-id="cef9b-147">&dagger;For in-process hosting, the value is limited to `1`.</span></span></p><p><span data-ttu-id="cef9b-148">Il est déconseillé de définir `processesPerApplication`.</span><span class="sxs-lookup"><span data-stu-id="cef9b-148">Setting `processesPerApplication` is discouraged.</span></span> <span data-ttu-id="cef9b-149">Cet attribut sera supprimé dans une version ultérieure.</span><span class="sxs-lookup"><span data-stu-id="cef9b-149">This attribute will be removed in a future release.</span></span></p> | <span data-ttu-id="cef9b-150">Valeur par défaut : `1`</span><span class="sxs-lookup"><span data-stu-id="cef9b-150">Default: `1`</span></span><br><span data-ttu-id="cef9b-151">Min : `1`</span><span class="sxs-lookup"><span data-stu-id="cef9b-151">Min: `1`</span></span><br><span data-ttu-id="cef9b-152">Max : `100`&dagger;</span><span class="sxs-lookup"><span data-stu-id="cef9b-152">Max: `100`&dagger;</span></span> |
| `processPath` | <p><span data-ttu-id="cef9b-153">Attribut de chaîne requis.</span><span class="sxs-lookup"><span data-stu-id="cef9b-153">Required string attribute.</span></span></p><p><span data-ttu-id="cef9b-154">Chemin d’accès au fichier exécutable lançant un processus d’écoute des requêtes HTTP.</span><span class="sxs-lookup"><span data-stu-id="cef9b-154">Path to the executable that launches a process listening for HTTP requests.</span></span> <span data-ttu-id="cef9b-155">Les chemins d’accès relatifs sont pris en charge.</span><span class="sxs-lookup"><span data-stu-id="cef9b-155">Relative paths are supported.</span></span> <span data-ttu-id="cef9b-156">Si le chemin d’accès commence par `.`, il est considéré comme étant relatif par rapport à la racine du site.</span><span class="sxs-lookup"><span data-stu-id="cef9b-156">If the path begins with `.`, the path is considered to be relative to the site root.</span></span></p> | |
| `rapidFailsPerMinute` | <p><span data-ttu-id="cef9b-157">Attribut entier facultatif.</span><span class="sxs-lookup"><span data-stu-id="cef9b-157">Optional integer attribute.</span></span></p><p><span data-ttu-id="cef9b-158">Spécifie le nombre de fois où le processus spécifié dans `processPath` est autorisé à se bloquer par minute.</span><span class="sxs-lookup"><span data-stu-id="cef9b-158">Specifies the number of times the process specified in `processPath` is allowed to crash per minute.</span></span> <span data-ttu-id="cef9b-159">Si cette limite est dépassée, le module arrête le lancement du processus pour le reste de la minute.</span><span class="sxs-lookup"><span data-stu-id="cef9b-159">If this limit is exceeded, the module stops launching the process for the remainder of the minute.</span></span></p><p><span data-ttu-id="cef9b-160">Non pris en charge avec hébergement in-process.</span><span class="sxs-lookup"><span data-stu-id="cef9b-160">Not supported with in-process hosting.</span></span></p> | <span data-ttu-id="cef9b-161">Valeur par défaut : `10`</span><span class="sxs-lookup"><span data-stu-id="cef9b-161">Default: `10`</span></span><br><span data-ttu-id="cef9b-162">Min : `0`</span><span class="sxs-lookup"><span data-stu-id="cef9b-162">Min: `0`</span></span><br><span data-ttu-id="cef9b-163">Max : `100`</span><span class="sxs-lookup"><span data-stu-id="cef9b-163">Max: `100`</span></span> |
| `requestTimeout` | <p><span data-ttu-id="cef9b-164">Attribut timespan facultatif.</span><span class="sxs-lookup"><span data-stu-id="cef9b-164">Optional timespan attribute.</span></span></p><p><span data-ttu-id="cef9b-165">Spécifie la durée pendant laquelle le module ASP.NET Core attend une réponse de la part du processus à l’écoute sur %ASPNETCORE_PORT%.</span><span class="sxs-lookup"><span data-stu-id="cef9b-165">Specifies the duration for which the ASP.NET Core Module waits for a response from the process listening on %ASPNETCORE_PORT%.</span></span></p><p><span data-ttu-id="cef9b-166">Dans les versions du module ASP.NET Core fournies avec ASP.NET Core 2.1 ou version ultérieure, la valeur `requestTimeout` est spécifiée en heures, minutes et secondes.</span><span class="sxs-lookup"><span data-stu-id="cef9b-166">In versions of the ASP.NET Core Module that shipped with the release of ASP.NET Core 2.1 or later, the `requestTimeout` is specified in hours, minutes, and seconds.</span></span></p><p><span data-ttu-id="cef9b-167">Ne s’applique pas à l’hébergement in-process.</span><span class="sxs-lookup"><span data-stu-id="cef9b-167">Doesn't apply to in-process hosting.</span></span> <span data-ttu-id="cef9b-168">Pour l’hébergement in-process, le module attend que l’application traite la requête.</span><span class="sxs-lookup"><span data-stu-id="cef9b-168">For in-process hosting, the module waits for the app to process the request.</span></span></p><p><span data-ttu-id="cef9b-169">Les valeurs valides pour les segments de minutes et secondes de la chaîne sont dans la plage de 0 à 59.</span><span class="sxs-lookup"><span data-stu-id="cef9b-169">Valid values for minutes and seconds segments of the string are in the range 0-59.</span></span> <span data-ttu-id="cef9b-170">L’utilisation de `60` dans la valeur de minutes ou de secondes génère une *erreur de serveur 500-Internal*.</span><span class="sxs-lookup"><span data-stu-id="cef9b-170">Use of `60` in the value for minutes or seconds results in a *500 - Internal Server Error*.</span></span></p> | <span data-ttu-id="cef9b-171">Valeur par défaut : `00:02:00`</span><span class="sxs-lookup"><span data-stu-id="cef9b-171">Default: `00:02:00`</span></span><br><span data-ttu-id="cef9b-172">Min : `00:00:00`</span><span class="sxs-lookup"><span data-stu-id="cef9b-172">Min: `00:00:00`</span></span><br><span data-ttu-id="cef9b-173">Max : `360:00:00`</span><span class="sxs-lookup"><span data-stu-id="cef9b-173">Max: `360:00:00`</span></span> |
| `shutdownTimeLimit` | <p><span data-ttu-id="cef9b-174">Attribut entier facultatif.</span><span class="sxs-lookup"><span data-stu-id="cef9b-174">Optional integer attribute.</span></span></p><p><span data-ttu-id="cef9b-175">Durée en secondes pendant laquelle le module attend que l’exécutable s’arrête correctement lorsque le `app_offline.htm` fichier est détecté.</span><span class="sxs-lookup"><span data-stu-id="cef9b-175">Duration in seconds that the module waits for the executable to gracefully shutdown when the `app_offline.htm` file is detected.</span></span></p> | <span data-ttu-id="cef9b-176">Valeur par défaut : `10`</span><span class="sxs-lookup"><span data-stu-id="cef9b-176">Default: `10`</span></span><br><span data-ttu-id="cef9b-177">Min : `0`</span><span class="sxs-lookup"><span data-stu-id="cef9b-177">Min: `0`</span></span><br><span data-ttu-id="cef9b-178">Max : `600`</span><span class="sxs-lookup"><span data-stu-id="cef9b-178">Max: `600`</span></span> |
| `startupTimeLimit` | <p><span data-ttu-id="cef9b-179">Attribut entier facultatif.</span><span class="sxs-lookup"><span data-stu-id="cef9b-179">Optional integer attribute.</span></span></p><p><span data-ttu-id="cef9b-180">Durée en secondes pendant laquelle le module attend que le fichier exécutable démarre un processus à l’écoute sur le port.</span><span class="sxs-lookup"><span data-stu-id="cef9b-180">Duration in seconds that the module waits for the executable to start a process listening on the port.</span></span> <span data-ttu-id="cef9b-181">Si cette limite de temps est dépassée, le module met fin au processus.</span><span class="sxs-lookup"><span data-stu-id="cef9b-181">If this time limit is exceeded, the module kills the process.</span></span></p><p><span data-ttu-id="cef9b-182">Lors de l’hébergement *in-process*: le processus n’est **pas** redémarré et n’utilise **pas** le `rapidFailsPerMinute` paramètre.</span><span class="sxs-lookup"><span data-stu-id="cef9b-182">When hosting *in-process*: The process is **not** restarted and does **not** use the `rapidFailsPerMinute` setting.</span></span></p><p><span data-ttu-id="cef9b-183">En cas *d’hébergement out-of-process*: le module tente de relancer le processus lorsqu’il reçoit une nouvelle demande et continue de tenter de redémarrer le processus lors des demandes entrantes suivantes, à moins que l’application ne démarre pas le `rapidFailsPerMinute` nombre de fois au cours de la dernière minute.</span><span class="sxs-lookup"><span data-stu-id="cef9b-183">When hosting *out-of-process*: The module attempts to relaunch the process when it receives a new request and continues to attempt to restart the process on subsequent incoming requests unless the app fails to start `rapidFailsPerMinute` number of times in the last rolling minute.</span></span></p><p><span data-ttu-id="cef9b-184">La valeur 0 (zéro) n’est **pas** considérée comme un délai infini.</span><span class="sxs-lookup"><span data-stu-id="cef9b-184">A value of 0 (zero) is **not** considered an infinite timeout.</span></span></p> | <span data-ttu-id="cef9b-185">Valeur par défaut : `120`</span><span class="sxs-lookup"><span data-stu-id="cef9b-185">Default: `120`</span></span><br><span data-ttu-id="cef9b-186">Min : `0`</span><span class="sxs-lookup"><span data-stu-id="cef9b-186">Min: `0`</span></span><br><span data-ttu-id="cef9b-187">Max : `3600`</span><span class="sxs-lookup"><span data-stu-id="cef9b-187">Max: `3600`</span></span> |
| `stdoutLogEnabled` | <p><span data-ttu-id="cef9b-188">Attribut booléen facultatif.</span><span class="sxs-lookup"><span data-stu-id="cef9b-188">Optional Boolean attribute.</span></span></p><p><span data-ttu-id="cef9b-189">Si la valeur `stdout` est true, et `stderr` pour le processus spécifié dans `processPath` sont redirigés vers le fichier spécifié dans `stdoutLogFile` .</span><span class="sxs-lookup"><span data-stu-id="cef9b-189">If true, `stdout` and `stderr` for the process specified in `processPath` are redirected to the file specified in `stdoutLogFile`.</span></span></p> | `false` |
| `stdoutLogFile` | <p><span data-ttu-id="cef9b-190">Attribut de chaîne facultatif.</span><span class="sxs-lookup"><span data-stu-id="cef9b-190">Optional string attribute.</span></span></p><p><span data-ttu-id="cef9b-191">Spécifie le chemin d’accès relatif ou absolu pour lequel `stdout` et `stderr` à partir du processus spécifié dans `processPath` sont journalisés.</span><span class="sxs-lookup"><span data-stu-id="cef9b-191">Specifies the relative or absolute file path for which `stdout` and `stderr` from the process specified in `processPath` are logged.</span></span> <span data-ttu-id="cef9b-192">Les chemins d’accès relatifs sont relatifs par rapport à la racine du site.</span><span class="sxs-lookup"><span data-stu-id="cef9b-192">Relative paths are relative to the root of the site.</span></span> <span data-ttu-id="cef9b-193">Tout chemin d’accès commençant par `.` est relatif par rapport à la racine du site et tous les autres chemins d’accès sont traités comme des chemins d’accès absolus.</span><span class="sxs-lookup"><span data-stu-id="cef9b-193">Any path starting with `.` are relative to the site root and all other paths are treated as absolute paths.</span></span> <span data-ttu-id="cef9b-194">Tous les dossiers fournis dans le chemin sont créés par le module au moment de la création du fichier journal.</span><span class="sxs-lookup"><span data-stu-id="cef9b-194">Any folders provided in the path are created by the module when the log file is created.</span></span> <span data-ttu-id="cef9b-195">À l’aide de délimiteurs de trait de soulignement, un horodateur, un ID de processus et une extension de fichier ( `.log` ) sont ajoutés au dernier segment du `stdoutLogFile` chemin d’accès.</span><span class="sxs-lookup"><span data-stu-id="cef9b-195">Using underscore delimiters, a timestamp, process ID, and file extension (`.log`) are added to the last segment of the `stdoutLogFile` path.</span></span> <span data-ttu-id="cef9b-196">Si `.\logs\stdout` est fourni en tant que valeur, un exemple de journal stdout est enregistré en tant que `stdout_20180205194132_1934.log` dans le `logs` dossier lorsqu’il est enregistré sur 2/5/2018 à 19:41:32 avec l’ID de processus 1934.</span><span class="sxs-lookup"><span data-stu-id="cef9b-196">If `.\logs\stdout` is supplied as a value, an example stdout log is saved as `stdout_20180205194132_1934.log` in the `logs` folder when saved on 2/5/2018 at 19:41:32 with a process ID of 1934.</span></span></p> | `aspnetcore-stdout` |

### <a name="set-environment-variables"></a><span data-ttu-id="cef9b-197">Définir des variables d’environnement</span><span class="sxs-lookup"><span data-stu-id="cef9b-197">Set environment variables</span></span>

<span data-ttu-id="cef9b-198">Des variables d’environnement peuvent être spécifiées pour le processus dans l’attribut `processPath`.</span><span class="sxs-lookup"><span data-stu-id="cef9b-198">Environment variables can be specified for the process in the `processPath` attribute.</span></span> <span data-ttu-id="cef9b-199">Spécifiez une variable d’environnement à l’aide de l’élément enfant `<environmentVariable>` d’un élément de collection `<environmentVariables>`.</span><span class="sxs-lookup"><span data-stu-id="cef9b-199">Specify an environment variable with the `<environmentVariable>` child element of an `<environmentVariables>` collection element.</span></span> <span data-ttu-id="cef9b-200">Les variables d’environnement définies dans cette section prévalent sur les variables d’environnement système.</span><span class="sxs-lookup"><span data-stu-id="cef9b-200">Environment variables set in this section take precedence over system environment variables.</span></span>

<span data-ttu-id="cef9b-201">L’exemple suivant définit deux variables d’environnement dans `web.config` .</span><span class="sxs-lookup"><span data-stu-id="cef9b-201">The following example sets two environment variables in `web.config`.</span></span> <span data-ttu-id="cef9b-202">`ASPNETCORE_ENVIRONMENT` définit l’environnement de l’application sur `Development`.</span><span class="sxs-lookup"><span data-stu-id="cef9b-202">`ASPNETCORE_ENVIRONMENT` configures the app's environment to `Development`.</span></span> <span data-ttu-id="cef9b-203">Un développeur peut définir temporairement cette valeur dans le `web.config` fichier afin de forcer le chargement de la [page d’exception du développeur](xref:fundamentals/error-handling) lors du débogage d’une exception d’application.</span><span class="sxs-lookup"><span data-stu-id="cef9b-203">A developer may temporarily set this value in the `web.config` file in order to force the [Developer Exception Page](xref:fundamentals/error-handling) to load when debugging an app exception.</span></span> <span data-ttu-id="cef9b-204">`CONFIG_DIR` est un exemple de variable d’environnement définie par l’utilisateur, dans laquelle le développeur a écrit du code qui lit la valeur de démarrage afin de former un chemin d’accès pour le chargement du fichier de configuration de l’application.</span><span class="sxs-lookup"><span data-stu-id="cef9b-204">`CONFIG_DIR` is an example of a user-defined environment variable, where the developer has written code that reads the value on startup to form a path for loading the app's configuration file.</span></span>

```xml
<aspNetCore processPath="dotnet"
      arguments=".\MyApp.dll"
      stdoutLogEnabled="false"
      stdoutLogFile=".\logs\stdout"
      hostingModel="inprocess">
  <environmentVariables>
    <environmentVariable name="ASPNETCORE_ENVIRONMENT" value="Development" />
    <environmentVariable name="CONFIG_DIR" value="f:\application_config" />
  </environmentVariables>
</aspNetCore>
```

> [!NOTE]
> <span data-ttu-id="cef9b-205">Une alternative à la définition de l’environnement directement dans `web.config` consiste à inclure la `<EnvironmentName>` propriété dans le [profil de publication ( `.pubxml` )](xref:host-and-deploy/visual-studio-publish-profiles) ou le fichier projet.</span><span class="sxs-lookup"><span data-stu-id="cef9b-205">An alternative to setting the environment directly in `web.config` is to include the `<EnvironmentName>` property in the [publish profile (`.pubxml`)](xref:host-and-deploy/visual-studio-publish-profiles) or project file.</span></span> <span data-ttu-id="cef9b-206">Cette approche définit l’environnement dans le `web.config` moment où le projet est publié :</span><span class="sxs-lookup"><span data-stu-id="cef9b-206">This approach sets the environment in `web.config` when the project is published:</span></span>
>
> ```xml
> <PropertyGroup>
>   <EnvironmentName>Development</EnvironmentName>
> </PropertyGroup>
> ```

> [!WARNING]
> <span data-ttu-id="cef9b-207">Affectez uniquement `Development` à la variable d’environnement `ASPNETCORE_ENVIRONMENT` sur les serveurs de test et de préproduction non accessibles aux réseaux non approuvés, par exemple Internet.</span><span class="sxs-lookup"><span data-stu-id="cef9b-207">Only set the `ASPNETCORE_ENVIRONMENT` environment variable to `Development` on staging and testing servers that aren't accessible to untrusted networks, such as the Internet.</span></span>

## <a name="configuration-of-iis-with-webconfig"></a><span data-ttu-id="cef9b-208">Configuration d’IIS avec `web.config`</span><span class="sxs-lookup"><span data-stu-id="cef9b-208">Configuration of IIS with `web.config`</span></span>

<span data-ttu-id="cef9b-209">La configuration d’IIS est influencée par la `<system.webServer>` section de `web.config` pour les scénarios IIS qui sont fonctionnels pour ASP.net Core applications avec le module ASP.net core.</span><span class="sxs-lookup"><span data-stu-id="cef9b-209">IIS configuration is influenced by the `<system.webServer>` section of `web.config` for IIS scenarios that are functional for ASP.NET Core apps with the ASP.NET Core Module.</span></span> <span data-ttu-id="cef9b-210">Par exemple, la configuration IIS est fonctionnelle pour la compression dynamique.</span><span class="sxs-lookup"><span data-stu-id="cef9b-210">For example, IIS configuration is functional for dynamic compression.</span></span> <span data-ttu-id="cef9b-211">Si IIS est configuré au niveau du serveur pour utiliser la compression dynamique, l' `<urlCompression>` élément dans le fichier de l’application `web.config` peut le désactiver pour une application ASP.net core.</span><span class="sxs-lookup"><span data-stu-id="cef9b-211">If IIS is configured at the server level to use dynamic compression, the `<urlCompression>` element in the app's `web.config` file can disable it for an ASP.NET Core app.</span></span>

<span data-ttu-id="cef9b-212">Pour plus d'informations, voir les rubriques suivantes :</span><span class="sxs-lookup"><span data-stu-id="cef9b-212">For more information, see the following topics:</span></span>

* [<span data-ttu-id="cef9b-213">Référence de configuration pour `<system.webServer>`</span><span class="sxs-lookup"><span data-stu-id="cef9b-213">Configuration reference for `<system.webServer>`</span></span>](/iis/configuration/system.webServer/)
* <xref:host-and-deploy/aspnet-core-module>
* <xref:host-and-deploy/iis/modules>

<span data-ttu-id="cef9b-214">Pour définir des variables d’environnement pour des applications individuelles s’exécutant dans des pools d’applications isolés (pris en charge pour IIS 10,0 ou version ultérieure), consultez la section \* `AppCmd.exe` commande\* de la rubrique [variables `<environmentVariables>` d’environnement](/iis/configuration/system.applicationHost/applicationPools/add/environmentVariables/#appcmdexe) dans la documentation de référence IIS.</span><span class="sxs-lookup"><span data-stu-id="cef9b-214">To set environment variables for individual apps running in isolated app pools (supported for IIS 10.0 or later), see the *`AppCmd.exe` command* section of the [Environment Variables `<environmentVariables>`](/iis/configuration/system.applicationHost/applicationPools/add/environmentVariables/#appcmdexe) topic in the IIS reference documentation.</span></span>

## <a name="configuration-sections-of-webconfig"></a><span data-ttu-id="cef9b-215">Sections de configuration de `web.config`</span><span class="sxs-lookup"><span data-stu-id="cef9b-215">Configuration sections of `web.config`</span></span>

<span data-ttu-id="cef9b-216">Les sections de configuration des applications ASP.NET 4. x dans `web.config` ne sont pas utilisées par les applications ASP.net Core pour la configuration :</span><span class="sxs-lookup"><span data-stu-id="cef9b-216">Configuration sections of ASP.NET 4.x apps in `web.config` aren't used by ASP.NET Core apps for configuration:</span></span>

* `<system.web>`
* `<appSettings>`
* `<connectionStrings>`
* `<location>`

<span data-ttu-id="cef9b-217">Les applications ASP.NET Core sont configurées à l’aide d’autres fournisseurs de configuration.</span><span class="sxs-lookup"><span data-stu-id="cef9b-217">ASP.NET Core apps are configured using other configuration providers.</span></span> <span data-ttu-id="cef9b-218">Pour plus d’informations, consultez [configuration](xref:fundamentals/configuration/index).</span><span class="sxs-lookup"><span data-stu-id="cef9b-218">For more information, see [Configuration](xref:fundamentals/configuration/index).</span></span>

## <a name="transform-webconfig"></a><span data-ttu-id="cef9b-219">Transformer web.config</span><span class="sxs-lookup"><span data-stu-id="cef9b-219">Transform web.config</span></span>

<span data-ttu-id="cef9b-220">Si vous devez effectuer une transformation `web.config` lors de la publication, consultez <xref:host-and-deploy/iis/transform-webconfig> .</span><span class="sxs-lookup"><span data-stu-id="cef9b-220">If you need to transform `web.config` on publish, see <xref:host-and-deploy/iis/transform-webconfig>.</span></span> <span data-ttu-id="cef9b-221">Vous devrez peut-être effectuer une transformation `web.config` sur la publication pour définir des variables d’environnement en fonction de la configuration, du profil ou de l’environnement.</span><span class="sxs-lookup"><span data-stu-id="cef9b-221">You might need to transform `web.config` on publish to set environment variables based on the configuration, profile, or environment.</span></span>

## <a name="additional-resources"></a><span data-ttu-id="cef9b-222">Ressources supplémentaires</span><span class="sxs-lookup"><span data-stu-id="cef9b-222">Additional resources</span></span>

* [<span data-ttu-id="cef9b-223">INFORMATION \<system.webServer></span><span class="sxs-lookup"><span data-stu-id="cef9b-223">IIS \<system.webServer></span></span>](/iis/configuration/system.webServer/)
* <xref:host-and-deploy/iis/modules>
* <xref:host-and-deploy/iis/transform-webconfig>
